---
title: Spree 4.2.0
section: release_notes
order: 0
hidden: true
---

## Major/New Features

### New responsive Admin Panel UI

Thanks to the awesome work of [Matthew Kennedy](https://github.com/spree/spree/pulls?q=is%3Apr+is%3Aclosed+label%3A%22Admin+Panel+%E2%9A%99%EF%B8%8F%22+author%3AMatthewKennedy) supported by Spark team we were able
to deliver a brand new and modern Admin UI which works great on mobile and tablet devices.

This was done in a gradual enhancement process of the current codebase so all of the existing Extensions and customizations will still work as it's fully backward compatible.

Next releases will bring more Admin UI improvements such as new Reporting dashboard.

### Built-in Multi Currency support

We've pulled [Spree Multi Currency gem](https://github.com/spree-contrib/spree_multi_currency) into Spree itself and improved upon it combined with multi Store support.

* each Store can have a default currency and a list of other supported currencies - setting this will affect products shown in each Store

* each Product can have different prices in each currency for different Variants

* when enabled you can show Store/Currency dropdown on Storefront

Multi currency is supported in [new Storefront](https://spreecommerce.org/spree-commerce-4-1-is-now-available-9-reasons-to-upgrade-or-use-it-for-a-new-e-commerce-project/), [API v2](http://api.spreecommerce.org/) and Admin Panel UI.

### Improved Multi Store support

Besides currency we've greatly improved the built in Multi Store support in Spree.

There are new additional settings and features for Store management:

* `Checkout Zone` - indicates which [Zone record](https://guides.spreecommerce.org/user/configuration/configuring_geography.html#zones) is used for Checkout, which in facts limits the Checkout for selected Countries or States ([Spark Solutions](https://github.com/spree/spree/issues?q=label%3A%22Multi-Store+%F0%9F%8F%AC%22+is%3Aclosed+checkout))

* `Default Country` - this is very helpful for maintaining multiple Stores of the same brand but for different regions, eg. US Store, Canadian Store, European Store ([Spark Solutions](https://github.com/spree/spree/pull/10139))

* `Logo` - you can now set a different logo, through Admin Panel for each Store :) ([Spark Solutions](https://github.com/spree/spree/pull/10386))

* `Mailer Logo` - same as above but for email notifications ([Spark Solutions](https://github.com/spree/spree/pull/10489))

* `Order Notification Email` for Store Owners ([Derek Johnson](https://github.com/spree/spree/pull/10253))

* `Checkout Payment Methods` - select which Payment Methods should be available in each Store [Spark Solutions](https://github.com/spree/spree/pull/10457)

* `Store Contact info` that appears in Storefront footer can be set now in the UI [Spark Solutions](https://github.com/spree/spree/pull/10128)

### New modern mobile first Email templates

Thanks to [El Passion team](https://www.elpassion.com/) we have now brand new and mobile first email templates
for notifications such as Order Confirmation, Shipment notification and so on. All emails were rebuilt with [Postmark Email Templates](https://github.com/wildbit/postmark-templates) to meet current needs and standards.

To improve developer happines our friends at [El Passion](https://www.elpassion.com/) prepared [email previews](https://guides.rubyonrails.org/action_mailer_basics.html#previewing-emails) for all email types to make it more convenient to wotk with emails in development environment.

As part of this improvements, more of the email layouts can be managed via Admin UI, this includes:

* setting different logo for each Store
* setting locale (language) of Store will be reflected in emails which will be translated automatically, based on [Spree I18n](https://github.com/spree-contrib/spree_i18n)
* setting Store name will automatically change copy in emails

### WCAG 2.1 compatible Storefront

We've invested a lot of time to make the default Storefront accessible for everyone. We've [enhanced Storefront](https://github.com/spree/spree/issues?q=label%3AAccessibility+is%3Aclosed) to be compatible with all [Web Content Accessibility Guidelines](https://www.w3.org/WAI/standards-guidelines/wcag/) version 2.1.

## Installation

### Add Spree gems to Gemfile

```ruby
gem 'spree', '~> 4.2'
gem 'spree_auth_devise', '~> 4.2'
gem 'spree_gateway', '~> 3.9'
```

### Run `bundle install`

**Note**: if you run into `Bundler could not find compatible versions for gem "sprockets":` error message, please run 

```bash
bundle update
```

### Use the install generators to set up Spree

```shell
rails g spree:install --user_class=Spree::User
rails g spree:auth:install
rails g spree_gateway:install
```

## Upgrade

[Follow 4.1 to 4.2 upgrade guide](/developer/upgrades/four-dot-one-to-four-dot-two.html)

## Noteworthy changes

Please review each of the noteworthy changes to ensure your customizations or extensions are not affected. If you are affected by a change, and have any suggestions please submit a PR to help the next person!

### Storefront

* Admin users to set which Option Types should be shown as filter option in Storefront [Spark Solutions](https://github.com/spree/spree/pull/10536)

* Added Compare At price to Products [Spark Solutions](https://github.com/spree/spree/pull/10105)

* Added support of OpenGraph meta tags in Storefront [Spark Solutions](https://github.com/spree/spree/pull/10524)

* Allow user to add names to addresses [Matthew Kennedy](https://github.com/spree/spree/pull/10250)

* Set Product Variant Via URL Query Parameter [Matthew Kennedy](https://github.com/spree/spree/pull/10156)

* Adds The Ability To Show / Not Show Specific Product Properties [Matthew Kennedy](https://github.com/spree/spree/pull/10163)

* Add ship to address on Checkout "Choose Delivery Method" page [Matthew Kennedy](https://github.com/spree/spree/pull/10239)

* Added `last_modified` and `etag` helper methods for `Spree::ProductsController` [Spark Solutions](https://github.com/spree/spree/pull/10515)

* Replace jquery.payment with cleave [Matthew Kennedy](https://github.com/spree/spree/pull/10363)

* Make config `show_raw_product_description` usable in new storefront [Matthew Kennedy](https://github.com/spree/spree/pull/10395)

* Adds `product_add_to_cart` event triggering [Spark Solutions](https://github.com/spree/spree/pull/10389)

* use `Spree.ready` instead of document ready on checkout address book [Chien-Fu](https://github.com/spree/spree/pull/10369)

* Shows my account store credits in current currency [Spark Solutions](https://github.com/spree/spree/pull/10238)

* Improved Performance and caching [Spark Solutions](https://github.com/spree/spree/pulls?q=is%3Apr+is%3Aclosed+performance+author%3Adamianlegawiec+milestone%3A4.2)

### API

* Added `API v2 Stores` endpoints [Prabin Poudel](https://github.com/spree/spree/pull/10453)

* Added `concat_taxons` filter to API v2 Products endpoint [Florian Bergmann](https://github.com/spree/spree/pull/10151)

* Moved from `fast_jsonapi` to `jsonapi-serializer` [Spark Solutions](https://github.com/spree/spree/pull/10587)

* Fixed N+1 queries on `/api/v2/storefront/taxons` [Yann Petitjean](https://github.com/spree/spree/pull/10508)

* API v1 controllers now inherit from `ActionController::API` rather than `ActionController::Base`

### Admin Panel

* Replace jquery.ui calendar with mobile friendly Flatpickr Cal [Matthew Kennedy](https://github.com/spree/spree/pull/10326)

* Refactored splitting order products into shipments by stock location [Spark Solutions](https://github.com/spree/spree/pull/10541)

* Add random string instead of 'new' in duplicated promotions [Spark Solutions](https://github.com/spree/spree/pull/10486)

* Add timezone to dates across entire app [Spark Solutions](https://github.com/spree/spree/pull/10382)

* Improve customer attribute editor [Gary Lai](https://github.com/spree/spree/pull/10262)

* includes translations to avoid n + 1 query [Gary Lai](https://github.com/spree/spree/pull/10173)

### Core

* Added `Store#unique_name` method [Mathew Kennedy](https://github.com/spree/spree/pull/10568)

* Added `Product#default_variant_cache_key` method [Spark solutions](https://github.com/spree/spree/pull/10447)

* Improve `Carmen` Data Import [Matthew Kennedy](https://github.com/spree/spree/pull/10483)

* Normalize promotion code before validation [Maksim Shylau](https://github.com/spree/spree/pull/10523)

* Outstanding balance uses reimbursement [Chris Hummel](https://github.com/spree/spree/pull/10411)

* Added unique index on `taxon_id` and `product_id` in `spree_products_taxons` [Spark Solutions](https://github.com/spree/spree/pull/10462)

* Added `active_storage_validations` gem to dependencies [Spark Solutions](https://github.com/spree/spree/pull/10495)

* Use [Spree Dev Tools](https://github.com/spree/spree_dev_tools) in extension generator [Spark Solutions](https://github.com/spree/spree/pull/10162)

* Updated migrations with column_exists checks to avoid upgrade issues [Spark Solutions](https://github.com/spree/spree/pull/10152)

## Full Changelog

You can view the full changes using [Github Compare](https://github.com/spree/spree/compare/4-1-stable...master).
